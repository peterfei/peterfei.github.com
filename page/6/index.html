<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="peterfei.me,peterfei" />





  <link rel="alternate" href="/atom.xml" title="Peterfei" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.0" />






<meta name="description" content="peterfei|技术|上主是我的牧者">
<meta property="og:type" content="website">
<meta property="og:title" content="Peterfei">
<meta property="og:url" content="http://peterfei.me/page/6/index.html">
<meta property="og:site_name" content="Peterfei">
<meta property="og:description" content="peterfei|技术|上主是我的牧者">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Peterfei">
<meta name="twitter:description" content="peterfei|技术|上主是我的牧者">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: '[object Object]',
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Peterfei </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  






  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Peterfei</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">上主是我的牧者，我实在一无所缺</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'PqEYgqEwUwFoXjgtngj9','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/20/swift实现代理-通知-闭包传值/" itemprop="url">
                  swift实现代理,通知,闭包传值
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-20T09:58:21+08:00" content="2016-12-20">
              2016-12-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/20/swift实现代理-通知-闭包传值/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/20/swift实现代理-通知-闭包传值/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>第一就是代理，这也是很常用的方式，特点是一对一的形式，而且逻辑结构非常清晰。实现起来较为简单：写协议 ，设置代理这个属性， 最好在你想通知代理做事情的方法中调用即可。当然这里面有一些细节，包括 ①协议定义时，请用关键字@required，和@optional来明确代理是否必须实现某些方法 ②代理的类型需用id类型，并写明要遵守的协议 ③就是在调用代理方法的时候需要判断代理是否实现该方法。</p>
<p>第二就是通知，通知的优点很明显，他是一对多的形式，而且可以在任意对象之间传递，不需要二者有联系，当然他的实现和代理相比较稍微绕一点，注册，发通知，收通知。这里面的注意点就是 ①对于系统没有定义的事件监听时需要自己发通知，这是你就需要定义一个key，字符串类型，这也是通知的一个弊端，你需要拷贝到收通知的对象，避免写错一个字母而无法收通知的尴尬 ②就是注册的通知中心需要手动移除，不然除了性能的问题还会有其他的问题出现，比如说一个控制器消失了之后还有因为某些事件而发出通知，造成不想要的结果。</p>
<p>第三就是block了，这是苹果后来才加入的，也是目前开发比较常用的一种方式，功能比较强大，但是在理解和使用上可能需要一段时间摸索和熟悉。他的最大特点就是回调，而且回调时可以传入参数，最重要的是，无论在哪调用，block的执行都会回到block创建的地方执行，而非调用的地方。而block本身可以封装一段代码，一段代码你懂的，很多人在初学时会被搞晕，甚至在block的声明上就纠结，其实很正常，多用就好。</p>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p>如下面代码,我们定义了一个协议方法, 其结构就是protocol关键字+协议的名称 + : + NSObjectProtocol {},注意Swift中的自定义协议其本身必须遵循NSObjectProtocol协议</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextViewControllerDelegate</span>: <span class="title">NSObjectProtocol</span></span>&#123;</div><div class="line">    <span class="comment">// 点击delegate按钮回调</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">delegateBtnWillClick</span><span class="params">(message : String)</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>并且在OC中,我们一般会定义一个属性来保存代理如@property (nonatomic,weak)id&lt; TextViewControllerDelegate &gt; delegate;但是在Swift中我们依然要这样做,只不过写法变成了weak var delegate : TextViewControllerDelegate?,注意一定要加上weak关键字,避免循环引用问题.这是我的demo中的代码,回调一段字符串</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/<span class="type">MARK</span>: - 点击代理传值按钮</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">delegateBtnClick</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"代理传值按钮被点击"</span>)</div><div class="line">    <span class="keyword">let</span> str = <span class="string">"代理传值按钮被点击,把上个界面的值传了过来"</span></div><div class="line">    delegate?.delegateBtnWillClick(str)</div><div class="line">    <span class="keyword">self</span>.navigationController?.popViewControllerAnimated(<span class="literal">true</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后就在别的控制器,设置那个控制器为该控制器的代理,去实现协议方法就可以了</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/14/使用SnapKit作应用新手上路导览/" itemprop="url">
                  使用SnapKit作应用新手上路导览
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-14T16:49:00+08:00" content="2016-09-14">
              2016-09-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/14/使用SnapKit作应用新手上路导览/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/14/使用SnapKit作应用新手上路导览/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>具体实现:<br>YMNewfeatureViewController.swift<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> SnapKit</div><div class="line"></div><div class="line"><span class="keyword">let</span> newFeatureID = <span class="string">"newFeatureID"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">YMNewfeatureViewController</span>: <span class="title">UICollectionViewController</span> </span>&#123;</div><div class="line">    <span class="comment">/// 布局对象</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> layout: <span class="type">UICollectionViewFlowLayout</span> = <span class="type">YMNewfeatureLayout</span>()</div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(collectionViewLayout: layout)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</div><div class="line">        <span class="built_in">fatalError</span>(<span class="string">"init(coder:) has not been implemented"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        collectionView?.registerClass(<span class="type">YMNewfeatureCell</span>.<span class="keyword">self</span>, forCellWithReuseIdentifier: newFeatureID)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(collectionView: UICollectionView, numberOfItemsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> kNewFeatureCount</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UICollectionViewCell</span> &#123;</div><div class="line">        <span class="keyword">let</span> cell = collectionView.dequeueReusableCellWithReuseIdentifier(newFeatureID, forIndexPath: indexPath) <span class="keyword">as</span>! <span class="type">YMNewfeatureCell</span></div><div class="line">        cell.imageIndex = indexPath.item</div><div class="line">        <span class="keyword">return</span> cell</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 完全显示一个cell之后调用</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(collectionView: UICollectionView, didEndDisplayingCell cell: UICollectionViewCell, forItemAtIndexPath indexPath: NSIndexPath)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> path = collectionView.indexPathsForVisibleItems().last!</div><div class="line">        <span class="keyword">if</span> path.item == (kNewFeatureCount - <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">let</span> cell = collectionView.cellForItemAtIndexPath(path) <span class="keyword">as</span>! <span class="type">YMNewfeatureCell</span></div><div class="line">            cell.startBtnAnimation()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/// YMNewfeatureCell</span></div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">YMNewfeatureCell</span>: <span class="title">UICollectionViewCell</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> imageIndex: <span class="type">Int</span>? &#123;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            iconView.image = <span class="type">UIImage</span>(named: <span class="string">"walkthrough_<span class="subst">\(imageIndex! + <span class="number">1</span>)</span>"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startBtnAnimation</span><span class="params">()</span></span> &#123;</div><div class="line">        startButton.hidden = <span class="literal">false</span></div><div class="line">        <span class="comment">// 执行动画</span></div><div class="line">        startButton.transform = <span class="type">CGAffineTransformMakeScale</span>(<span class="number">0.0</span>, <span class="number">0.0</span>)</div><div class="line">        startButton.userInteractionEnabled = <span class="literal">false</span></div><div class="line">        </div><div class="line">        <span class="comment">// UIViewAnimationOptions(rawValue: 0) == OC knilOptions</span></div><div class="line">        <span class="type">UIView</span>.animateWithDuration(<span class="number">2</span>, delay: <span class="number">0</span>, usingSpringWithDamping: <span class="number">0.8</span>, initialSpringVelocity: <span class="number">5</span>, options: <span class="type">UIViewAnimationOptions</span>(rawValue: <span class="number">0</span>), animations: &#123; () -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line">            <span class="comment">// 清空形变</span></div><div class="line">            <span class="keyword">self</span>.startButton.transform = <span class="type">CGAffineTransformIdentity</span></div><div class="line">            &#125;, completion: &#123; (<span class="number">_</span>) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line">                <span class="keyword">self</span>.startButton.userInteractionEnabled = <span class="literal">true</span></div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</div><div class="line">        </div><div class="line">        setupUI()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</div><div class="line">        <span class="built_in">fatalError</span>(<span class="string">"init(coder:) has not been implemented"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setupUI</span><span class="params">()</span></span> &#123;</div><div class="line">        contentView.addSubview(iconView)</div><div class="line">        contentView.addSubview(startButton)</div><div class="line">        </div><div class="line">        iconView.snp_makeConstraints &#123; (make) <span class="keyword">in</span></div><div class="line">            make.edges.equalTo(contentView)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        startButton.snp_makeConstraints &#123; (make) <span class="keyword">in</span></div><div class="line">            make.bottom.equalTo(contentView.snp_bottom).offset(-<span class="number">50</span>)</div><div class="line">            make.size.equalTo(<span class="type">CGSizeMake</span>(<span class="number">150</span>, <span class="number">40</span>))</div><div class="line">            make.centerX.equalTo(<span class="number">0</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> iconView = <span class="type">UIImageView</span>()</div><div class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> startButton: <span class="type">UIButton</span> = &#123;</div><div class="line">        <span class="keyword">let</span> btn = <span class="type">UIButton</span>()</div><div class="line">        btn.setBackgroundImage(<span class="type">UIImage</span>(named: <span class="string">"btn_begin"</span>), forState: .<span class="type">Normal</span>)</div><div class="line">        btn.addTarget(<span class="keyword">self</span>, action: #selector(startButtonClick), forControlEvents: .<span class="type">TouchUpInside</span>)</div><div class="line">        btn.layer.masksToBounds = <span class="literal">true</span></div><div class="line">        btn.hidden = <span class="literal">true</span></div><div class="line">        <span class="keyword">return</span> btn</div><div class="line">    &#125;()</div><div class="line">    </div><div class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">startButtonClick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="type">UIApplication</span>.sharedApplication().keyWindow?.rootViewController = <span class="type">YMTabBarController</span>()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">YMNewfeatureLayout</span>: <span class="title">UICollectionViewFlowLayout</span> </span>&#123;</div><div class="line">    <span class="comment">/// 准备布局</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepareLayout</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// 设置 layout 布局</span></div><div class="line">        itemSize = <span class="type">UIScreen</span>.mainScreen().bounds.size</div><div class="line">        minimumLineSpacing = <span class="number">0</span></div><div class="line">        minimumInteritemSpacing = <span class="number">0</span></div><div class="line">        scrollDirection = .<span class="type">Horizontal</span></div><div class="line">        <span class="comment">// 设置 contentView 属性</span></div><div class="line">        collectionView?.showsVerticalScrollIndicator = <span class="literal">false</span></div><div class="line">        collectionView?.bounces = <span class="literal">false</span></div><div class="line">        collectionView?.pagingEnabled = <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>用户首次装载时应用:<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> !NSUserDefaults.standardUserDefaults().boolForKey(YMFirstLaunch) &#123;</div><div class="line">    <span class="built_in">window</span>?.rootViewController = YMNewfeatureViewController()</div><div class="line">    NSUserDefaults.standardUserDefaults().setBool(<span class="literal">true</span>, forKey: YMFirstLaunch)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">window</span>?.rootViewController = YMTabBarController()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/11/Swift-学习之tableView实现/" itemprop="url">
                  Swift 学习之tableView实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-11T00:20:12+08:00" content="2016-09-11">
              2016-09-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/11/Swift-学习之tableView实现/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/11/Swift-学习之tableView实现/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>在做移动端开发时，难免会用到tableview 来渲染列表数据，像这样:<br><img src="http://pic.yupoo.com/peterfei_s/FQ13FI9K/Pi7pg.png" alt=""></p>
<p>实现也很简单，先贴出code:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">let</span> homeCellID = <span class="string">"homeCellID"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">YMTopicViewController</span>: <span class="title">YMBaseViewController</span>, <span class="title">UITableViewDelegate</span>, <span class="title">UITableViewDataSource</span>, <span class="title">YMHomeCellDelegate</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> type = <span class="type">Int</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> tableView = <span class="type">UITableView</span>()</div><div class="line">    <span class="comment">/// 首页列表数据</span></div><div class="line">    <span class="keyword">var</span> items = [<span class="type">YMHomeItem</span>]()</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        view.backgroundColor = <span class="type">YMGlobalColor</span>()</div><div class="line">        setupTableView()</div><div class="line">        <span class="comment">// 获取首页数据</span></div><div class="line">        <span class="keyword">weak</span> <span class="keyword">var</span> weakSelf = <span class="keyword">self</span></div><div class="line">        <span class="type">YMNetworkTool</span>.shareNetworkTool.loadHomeInfo(type) &#123; (homeItems) <span class="keyword">in</span></div><div class="line">            weakSelf!.items = homeItems</div><div class="line">            weakSelf?.tableView.reloadData()</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</div><div class="line">        <span class="keyword">let</span> homeCell = tableView.dequeueReusableCellWithIdentifier(homeCellID) <span class="keyword">as</span>! <span class="type">YMHomeCell</span></div><div class="line">        homeCell.homeItem = items[indexPath.row]</div><div class="line">        homeCell.delegate = <span class="keyword">self</span></div><div class="line">        <span class="keyword">return</span> homeCell</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> detailVC = <span class="type">YMDetailViewController</span>()</div><div class="line">        detailVC.homeItem = items[indexPath.row]</div><div class="line">        detailVC.title = <span class="string">"攻略详情"</span></div><div class="line">        navigationController?.pushViewController(detailVC, animated: <span class="literal">true</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">homeCellDidClickedFavoriteButton</span><span class="params">(button: UIButton)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"favorite button click"</span>)</div><div class="line">        <span class="keyword">let</span> loginVC = <span class="type">YMLoginViewController</span>()</div><div class="line">        loginVC.title = <span class="string">"登录"</span></div><div class="line">        <span class="keyword">let</span> nav = <span class="type">YMNavigationController</span>(rootViewController: loginVC)</div><div class="line">        presentViewController(nav, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setupTableView</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> tableView = <span class="type">UITableView</span>()</div><div class="line">        tableView.frame = view.bounds</div><div class="line">        tableView.delegate = <span class="keyword">self</span></div><div class="line">        tableView.dataSource = <span class="keyword">self</span></div><div class="line">        tableView.rowHeight = <span class="number">160</span></div><div class="line">        tableView.separatorStyle = .<span class="type">None</span></div><div class="line">        tableView.contentInset = <span class="type">UIEdgeInsetsMake</span>(kTitlesViewY + kTitlesViewH, <span class="number">0</span>, tabBarController!.tabBar.height, <span class="number">0</span>)</div><div class="line">        tableView.scrollIndicatorInsets = tableView.contentInset</div><div class="line">        <span class="keyword">let</span> nib = <span class="type">UINib</span>(nibName: <span class="type">String</span>(<span class="type">YMHomeCell</span>), bundle: <span class="literal">nil</span>)</div><div class="line">        tableView.registerNib(nib, forCellReuseIdentifier: homeCellID)</div><div class="line">        view.addSubview(tableView)</div><div class="line">        <span class="keyword">self</span>.tableView = tableView</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didReceiveMemoryWarning()</div><div class="line">        <span class="comment">// Dispose of any resources that can be recreated.</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment">/*</div><div class="line">     // MARK: - Navigation</div><div class="line">     </div><div class="line">     // In a storyboard-based application, you will often want to do a little preparation before navigation</div><div class="line">     override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) &#123;</div><div class="line">     // Get the new view controller using segue.destinationViewController.</div><div class="line">     // Pass the selected object to the new view controller.</div><div class="line">     &#125;</div><div class="line">     */</span></div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/09/11/Swift-学习之tableView实现/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/09/swift中的单例/" itemprop="url">
                  swift中的单例
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-09T17:51:27+08:00" content="2016-09-09">
              2016-09-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/09/swift中的单例/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/09/swift中的单例/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##关于单例<br>. 单例必须是唯一的，所以它才被称为单例。在一个应用程序的生命周期里，有且只有一个实例存在。单例的存在给我们提供了一个唯一的全局状态。比如我们熟悉的NSNotification，UIApplication和NSUserDefaults都是单例。<br>. 为了保持一个单例的唯一性，单例的构造器必须是私有的。这防止其他对象也能创建出单例类的实例。感谢所有帮我指出这点的人<br>. 为了确保单例在应用程序的整个生命周期是唯一的，它就必须是线程安全的。当你一想到并发肯定一阵恶心，简单来说，如果你写单例的方式是错误的，就有可能会有两个线程尝试在同一时间初始化同一个单例，这样你就有潜在的风险得到两个不同的单例。这就意味着我们需要用GCD的dispatch_once来确保初始化单例的代码在运行时只执行一次。</p>
<h2 id="swift-中单例写法"><a href="#swift-中单例写法" class="headerlink" title="swift 中单例写法"></a>swift 中单例写法</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">TheOneAndOnlyKraken</span> &#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedInstance = TheOneAndOnlyKraken()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="项目中的应用"><a href="#项目中的应用" class="headerlink" title="项目中的应用"></a>项目中的应用</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">YMNetworkTool</span>: <span class="title">NSObject</span> </span>&#123;</div><div class="line">    <span class="comment">/// 单例</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> shareNetworkTool = <span class="type">YMNetworkTool</span>()</div><div class="line">    </div><div class="line">    <span class="comment">/// 获取首页数据</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadHomeInfo</span><span class="params">(id: Int, finished:<span class="params">(homeItems: [YMHomeItem])</span></span></span> -&gt; ()) &#123;</div><div class="line"><span class="comment">//        SVProgressHUD.showWithStatus("正在加载...")</span></div><div class="line">        <span class="keyword">let</span> url = <span class="type">BASE_URL</span> + <span class="string">"v1/channels/"</span> + <span class="type">String</span>(id) + <span class="string">"/items?gender=1&amp;generation=1&amp;limit=20&amp;offset=0"</span></div><div class="line">        <span class="type">Alamofire</span></div><div class="line">            .request(.<span class="type">GET</span>, url)</div><div class="line">            .responseJSON &#123; (response) <span class="keyword">in</span></div><div class="line">                <span class="keyword">guard</span> response.result.isSuccess <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">//                    SVProgressHUD.showErrorWithStatus("加载失败...")</span></div><div class="line">                    <span class="keyword">return</span></div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> <span class="keyword">let</span> value = response.result.value &#123;</div><div class="line">                    <span class="keyword">let</span> dict = <span class="type">JSON</span>(value)</div><div class="line">                    <span class="keyword">let</span> code = dict[<span class="string">"code"</span>].intValue</div><div class="line">                    <span class="keyword">let</span> message = dict[<span class="string">"message"</span>].stringValue</div><div class="line">                    <span class="keyword">guard</span> code == <span class="type">RETURN_OK</span> <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">//                        SVProgressHUD.showInfoWithStatus(message)</span></div><div class="line">                        <span class="keyword">return</span></div><div class="line">                    &#125;</div><div class="line">                    <span class="comment">// 移除加载提示</span></div><div class="line"><span class="comment">//                    SVProgressHUD.dismiss()</span></div><div class="line">                    <span class="keyword">let</span> data = dict[<span class="string">"data"</span>].dictionary</div><div class="line">                    <span class="comment">//  字典转成模型</span></div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> items = data![<span class="string">"items"</span>]?.arrayObject &#123;</div><div class="line">                        <span class="keyword">var</span> homeItems = [<span class="type">YMHomeItem</span>]()</div><div class="line">                        <span class="keyword">for</span> item <span class="keyword">in</span> items &#123;</div><div class="line">                            <span class="keyword">let</span> homeItem = <span class="type">YMHomeItem</span>(dict: item <span class="keyword">as</span>! [<span class="type">String</span>: <span class="type">AnyObject</span>])</div><div class="line">                            homeItems.append(homeItem)</div><div class="line">                        &#125;</div><div class="line">                        finished(homeItems: homeItems)</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/// 获取首页顶部选择数据</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadHomeTopData</span><span class="params">(finished:<span class="params">(ym_channels: [YMChannel])</span></span></span> -&gt; ()) &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> url = <span class="type">BASE_URL</span> + <span class="string">"v2/channels/preset?gender=1&amp;generation=1"</span></div><div class="line">        <span class="type">Alamofire</span></div><div class="line">            .request(.<span class="type">GET</span>, url)</div><div class="line">            .responseJSON &#123; (response) <span class="keyword">in</span></div><div class="line">                <span class="keyword">guard</span> response.result.isSuccess <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">//                    SVProgressHUD.showErrorWithStatus("加载失败...")</span></div><div class="line">                    <span class="keyword">return</span></div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> <span class="keyword">let</span> value = response.result.value &#123;</div><div class="line">                    <span class="keyword">let</span> dict = <span class="type">JSON</span>(value)</div><div class="line">                    <span class="keyword">let</span> code = dict[<span class="string">"code"</span>].intValue</div><div class="line">                    <span class="keyword">let</span> message = dict[<span class="string">"message"</span>].stringValue</div><div class="line">                    <span class="keyword">guard</span> code == <span class="type">RETURN_OK</span> <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">//                        SVProgressHUD.showInfoWithStatus(message)</span></div><div class="line">                        <span class="keyword">return</span></div><div class="line">                    &#125;</div><div class="line"><span class="comment">//                    SVProgressHUD.dismiss()</span></div><div class="line">                    <span class="keyword">let</span> data = dict[<span class="string">"data"</span>].dictionary</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> channels = data![<span class="string">"channels"</span>]?.arrayObject &#123;</div><div class="line">                        <span class="keyword">var</span> ym_channels = [<span class="type">YMChannel</span>]()</div><div class="line">                        <span class="keyword">for</span> channel <span class="keyword">in</span> channels &#123;</div><div class="line">                            <span class="keyword">let</span> ym_channel = <span class="type">YMChannel</span>(dict: channel <span class="keyword">as</span>! [<span class="type">String</span>: <span class="type">AnyObject</span>])</div><div class="line">                            ym_channels.append(ym_channel)</div><div class="line">                        &#125;</div><div class="line">                        finished(ym_channels: ym_channels)</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/09/IOS-swift-UITabBarController-开发/" itemprop="url">
                  IOS swift UITabBarController 开发
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-09T15:30:42+08:00" content="2016-09-09">
              2016-09-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/09/IOS-swift-UITabBarController-开发/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/09/IOS-swift-UITabBarController-开发/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Swift 开发中，省去storyboard,应用UITabBarController也可以生成:<br><img src="http://pic.yupoo.com/peterfei_s/FQ13FI9K/Pi7pg.png" alt="效果"><br>首页写<code>AppDelegate.swift</code>:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="meta">@UIApplicationMain</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> window: <span class="type">UIWindow</span>?</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        window = <span class="type">UIWindow</span>(frame:<span class="type">UIScreen</span>.mainScreen().bounds)</div><div class="line">        window?.rootViewController = <span class="type">YMTabBarController</span>()</div><div class="line">        window?.makeKeyAndVisible()</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillResignActive</span><span class="params">(application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.</span></div><div class="line">        <span class="comment">// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationDidEnterBackground</span><span class="params">(application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.</span></div><div class="line">        <span class="comment">// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillEnterForeground</span><span class="params">(application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationDidBecomeActive</span><span class="params">(application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillTerminate</span><span class="params">(application: UIApplication)</span></span> &#123;</div><div class="line">        <span class="comment">// Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><em>YMTabBarController.swift:</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">YMTabBarController</span>: <span class="title">UITabBarController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        tabBar.tintColor = <span class="type">UIColor</span>(red: <span class="number">245</span> / <span class="number">255</span>, green: <span class="number">80</span> / <span class="number">255</span>, blue: <span class="number">83</span> / <span class="number">255</span>, alpha: <span class="number">1.0</span>)</div><div class="line">        </div><div class="line">        addChildViewControllers()</div><div class="line"></div><div class="line">        <span class="comment">// Do any additional setup after loading the view.</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">addChildViewControllers</span><span class="params">()</span></span>&#123;</div><div class="line">        addChildViewController(<span class="string">"YMDanTangViewController"</span>, title: <span class="string">"单糖"</span>, imageName: <span class="string">"TabBar_home_23x23_"</span>)</div><div class="line"><span class="comment">//        addChildViewController("YMProductViewController", title: "单品", imageName: "TabBar_gift_23x23_")</span></div><div class="line"><span class="comment">//        addChildViewController("YMCategoryViewController", title: "分类", imageName: "TabBar_category_23x23_")</span></div><div class="line">        addChildViewController(<span class="string">"YMMeViewController"</span>, title: <span class="string">"我"</span>, imageName: <span class="string">"TabBar_me_boy_23x23_"</span>)</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     # 初始化子控制器</div><div class="line">     </div><div class="line">     - parameter childControllerName: 需要初始化的控制器</div><div class="line">     - parameter title:               标题</div><div class="line">     - parameter imageName:           图片名称</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">addChildViewController</span><span class="params">(childControllerName: String, title: String, imageName: String)</span></span> &#123;</div><div class="line">        <span class="comment">// 动态获取命名空间</span></div><div class="line">        <span class="keyword">let</span> ns = <span class="type">NSBundle</span>.mainBundle().infoDictionary![<span class="string">"CFBundleExecutable"</span>] <span class="keyword">as</span>! <span class="type">String</span></div><div class="line">        <span class="comment">// 将字符串转化为类，默认情况下命名空间就是项目名称，但是命名空间可以修改</span></div><div class="line">        <span class="keyword">let</span> cls: <span class="type">AnyClass</span>? = <span class="type">NSClassFromString</span>(ns + <span class="string">"."</span> + childControllerName)</div><div class="line">        <span class="keyword">let</span> vcClass = cls <span class="keyword">as</span>! <span class="type">UIViewController</span>.<span class="type">Type</span></div><div class="line">        <span class="keyword">let</span> vc = vcClass.<span class="keyword">init</span>()</div><div class="line">        <span class="comment">// 设置对应的数据</span></div><div class="line">        vc.tabBarItem.image = <span class="type">UIImage</span>(named: imageName)</div><div class="line">        vc.tabBarItem.selectedImage = <span class="type">UIImage</span>(named: imageName + <span class="string">"selected"</span>)</div><div class="line">        vc.title = title</div><div class="line">        <span class="comment">// 给每个控制器包装一个导航控制器</span></div><div class="line">        <span class="keyword">let</span> nav = <span class="type">YMNavigationController</span>()</div><div class="line">        nav.addChildViewController(vc)</div><div class="line">        addChildViewController(nav)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里面有几个知识点：</p>
<p>###如何通过字符串创建类对象</p>
<pre><code>1. 在swift中打印对象时，会发现在类型前面总会有命名空间 .+类名
2. 在swift中用字符串生成类对象就需要拼接成这样的格式，才能成功生成类
3. 注意，命名空间不要加特殊符号，不然依然无法获取控制器类
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/1370647-d321f25de36b5d2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/1370647-c7a027382a6a2048.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://ruby-china-files.b0.upaiyun.com/user/big_avatar/5575.jpg"
               alt="peterfei" />
          <p class="site-author-name" itemprop="name">peterfei</p>
          <p class="site-description motion-element" itemprop="description">peterfei|技术|上主是我的牧者</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">77</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">14</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">62</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/peterfei" target="_blank">
                  
                    <i class="fa fa-globe"></i> github
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">peterfei</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"peterfei"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  

  
  


</body>
</html>
